# Sleep Mode - ASCII 原型图

> 供 AI 和开发者阅读的文本原型，定义所有界面元素和交互逻辑

---

## 一、系统托盘图标

### 1.1 图标状态

```
关闭状态          开启状态          处理中状态
   ___              ___              ___
  /   \            /   \            /   \
 | OFF |          | ON  |          | ~~~ |
  \___/            \___/            \___/
 (灰色)           (紫色)          (紫色+动画)
```

### 1.2 图标交互

| 操作 | 响应 |
|------|------|
| 左键单击 | 打开托盘菜单 |
| 右键单击 | 打开托盘菜单（同左键） |
| 双击 | 切换开关状态 |

---

## 二、托盘菜单

### 2.1 关闭状态

```
+----------------------------------+
|  [月亮图标]  Sleep Mode          |
|             音频优化已关闭        |
+----------------------------------+
|                                  |
|  [灰色图标] 睡眠模式      [ OFF ] |
|            点击开启音频优化       |
|                                  |
+----------------------------------+
|  [齿轮] 设置                     |
|  [修复] 恢复系统音频             |
|  [音频] 打开系统音频设置         |
|  [问号] 帮助                     |
|  [退出] 退出           (红色文字) |
+----------------------------------+

宽度: 280px
```

### 2.2 开启状态

```
+----------------------------------+
|  [月亮图标]  Sleep Mode          |
|             音频优化已开启 (绿色) |
+----------------------------------+
|                                  |
|  [绿色图标] 睡眠模式      [=ON=] |
|            正在优化系统音频       |
|                                  |
+----------------------------------+
|  当前预设                        |
|  +----------------------------+  |
|  | [月亮] 睡眠模式        [v] |  |
|  +----------------------------+  |
+----------------------------------+
|  [EQ图标] 睡眠 EQ          [x]  |
+----------------------------------+
|  +----------------------------+  |
|  | 处理状态    [*] 实时处理中 |  |
|  | 输出响度        -16 LUFS  |  |
|  | [====----音量条----====]  |  |
|  +----------------------------+  |
+----------------------------------+
|  [齿轮] 设置                     |
|  [修复] 恢复系统音频             |
|  [音频] 打开系统音频设置         |
|  [问号] 帮助                     |
|  [退出] 退出           (红色文字) |
+----------------------------------+
```

### 2.3 预设下拉菜单（展开状态）

```
+----------------------------------+
|  选择预设                        |
|  +----------------------------+  |
|  | [月亮] 睡眠模式        [v] |  |
|  +----------------------------+  |
|  +----------------------------+  |
|  | [月亮] 睡眠模式        [x] |  |  <- 当前选中
|  |        中等压缩+高频柔化    |  |
|  +----------------------------+  |
|  | [话筒] ASMR 模式           |  |
|  |        轻度压缩+轻微柔化    |  |
|  +----------------------------+  |
|  | [铃铛] 播客模式            |  |
|  |        中等压缩+无EQ       |  |
|  +----------------------------+  |
|  | [波浪] 白噪音模式          |  |
|  |        轻度压缩+无EQ       |  |
|  +----------------------------+  |
+----------------------------------+
```

### 2.4 元素规格

| 元素 | 规格 |
|------|------|
| 菜单宽度 | 280px |
| 内边距 | 16px (header), 8px (section) |
| 圆角 | 12px |
| 开关尺寸 | 44x24px |
| 图标尺寸 | 40x40px (header), 36x36px (toggle), 20x20px (menu item) |

---

## 三、设置面板

### 3.1 基础设置（免费版）

```
+------------------------------------------+
|  设置                              [X]   |
+------------------------------------------+
|                                          |
|  -- 音频处理 --                          |
|                                          |
|  压缩强度                         中等   |
|  轻 [====●======] 强                     |
|  +--------------------------------------+|
|  | 较低的动态压缩，保留更多自然动态     ||
|  +--------------------------------------+|
|                                          |
|  输出响度                      -16 LUFS  |
|  -24 [======●====] -10                   |
|  +--------------------------------------+|
|  | 推荐睡眠收听，比流媒体标准略低       ||
|  +--------------------------------------+|
|                                          |
|  -- 睡眠 EQ --                           |
|                                          |
|  +--------------------------------------+|
|  | [x] 高频柔化                         ||
|  |     减少刺耳的高频，让声音更柔和     ||
|  +--------------------------------------+|
|  +--------------------------------------+|
|  | [x] 低频温暖                         ||
|  |     增加低频温暖感，更舒适放松       ||
|  +--------------------------------------+|
|                                          |
|  -- 通用 --                              |
|                                          |
|  +--------------------------------------+|
|  | [ ] 开机自动启动                     ||
|  |     系统启动时自动运行 Sleep Mode    ||
|  +--------------------------------------+|
|  +--------------------------------------+|
|  | [x] 记住上次状态                     ||
|  |     下次启动时恢复之前的开关状态     ||
|  +--------------------------------------+|
|                                          |
+------------------------------------------+
|  [  恢复默认  ]        [    确定    ]    |
+------------------------------------------+

宽度: 380px
```

### 3.2 高级设置（Pro 版）

```
+------------------------------------------+
|  高级设置                          [X]   |
+------------------------------------------+
|                                          |
|  -- 峰值捕获器 --                        |
|                                          |
|  阈值                           -3 dBFS  |
|  -12 [========●==] 0                     |
|                                          |
|  Look-ahead                        5 ms  |
|  1 [=====●=====] 10                      |
|                                          |
|  -- 主压缩器 --                          |
|                                          |
|  压缩比                           2.5:1  |
|  1:1 [====●======] 10:1                  |
|                                          |
|  阈值                          -18 dBFS  |
|  -30 [======●====] 0                     |
|                                          |
|  -- 快捷键 --                            |
|                                          |
|  +--------------------------------------+|
|  | 全局开关                             ||
|  | 快速切换睡眠模式                     ||
|  |                 [Ctrl/Cmd][Shift][S] ||
|  +--------------------------------------+|
|                                          |
+------------------------------------------+
|  [  恢复默认  ]        [    确定    ]    |
+------------------------------------------+
```

### 3.3 元素规格

| 元素 | 规格 |
|------|------|
| 面板宽度 | 380px |
| 最大高度 | 500px（超出可滚动） |
| 滑块高度 | 6px |
| 滑块把手 | 18x18px 圆形 |
| 复选框 | 20x20px |
| 按钮高度 | 44px |

---

## 四、首次使用引导

### 4.1 Step 1: 欢迎页

```
+------------------------------------------+
| [===============33%==================]   |
+------------------------------------------+
|                                          |
|              +--------+                  |
|              | [月亮] |                  |
|              +--------+                  |
|                                          |
|         欢迎使用 Sleep Mode              |
|                                          |
|  让您的音频体验更适合睡眠，              |
|  不再被突然的音量变化惊醒。              |
|                                          |
|  +--------------------------------------+|
|  | [v] 自动平衡音量，告别手动调节       ||
|  +--------------------------------------+|
|  +--------------------------------------+|
|  | [v] 限制突发响声，保护您的睡眠       ||
|  +--------------------------------------+|
|  +--------------------------------------+|
|  | [v] 系统级处理，所有应用都生效       ||
|  +--------------------------------------+|
|                                          |
|              [*]  [ ]  [ ]               |
|                                          |
+------------------------------------------+
|  [  跳过  ]            [    继续    ]    |
+------------------------------------------+

宽度: 480px
```

### 4.2 Step 2: 音频路由设置（必需）

> 说明：v1 通过“虚拟音频设备”完成系统音频重路由。完成一次性设置后，后续即可一键开启/关闭。

#### 4.2.1 Windows（未安装虚拟音频设备）

```
+------------------------------------------+
| [===============66%==================]   |
+------------------------------------------+
|                                          |
|              +--------+                  |
|              | [盾牌] |  (橙色)          |
|              +--------+                  |
|                                          |
|         需要设置音频路由                 |
|                                          |
|  Windows 需要安装虚拟音频设备            |
|  才能让系统音频进入 Sleep Mode。         |
|                                          |
|  +--------------------------------------+|
|  | [!] 安装虚拟音频设备                 ||
|  |                                      ||
|  |  1. 点击下方按钮打开安装教程         ||
|  |  2. 安装虚拟音频线材（如 VB-CABLE）  ||
|  |  3. 将其设置为系统默认输出设备       ||
|  +--------------------------------------+|
|                                          |
|              [ ]  [*]  [ ]               |
|                                          |
+------------------------------------------+
|  [ 稍后设置 ]        [ 查看安装教程 ]    |
+------------------------------------------+
```

#### 4.2.2 macOS（未安装 BlackHole / 未授权麦克风）

```
+------------------------------------------+
| [===============66%==================]   |
+------------------------------------------+
|                                          |
|              +--------+                  |
|              | [盾牌] |  (橙色)          |
|              +--------+                  |
|                                          |
|         需要设置音频路由                 |
|                                          |
|  macOS 需要安装 BlackHole，              |
|  并授予麦克风权限（用于捕获虚拟输入）。  |
|                                          |
|  +--------------------------------------+|
|  | [!] 安装 BlackHole                   ||
|  |                                      ||
|  |  1. 点击下方按钮下载 BlackHole       ||
|  |  2. 运行安装程序                     ||
|  |  3. 将 BlackHole 设为系统默认输出    ||
|  |  4. 授予 Sleep Mode 麦克风权限       ||
|  +--------------------------------------+|
|                                          |
|              [ ]  [*]  [ ]               |
|                                          |
+------------------------------------------+
|  [ 稍后设置 ]        [ 下载 BlackHole ]  |
+------------------------------------------+
```

#### 4.2.3 已安装但未路由（E008）

```
+------------------------------------------+
| [===============66%==================]   |
+------------------------------------------+
|                                          |
|              +--------+                  |
|              | [!]    |  (橙色)          |
|              +--------+                  |
|                                          |
|        系统音频尚未进入 Sleep Mode       |
|                                          |
|  已检测到虚拟音频设备，但当前系统默认    |
|  输出不是虚拟设备。                      |
|                                          |
|  +--------------------------------------+|
|  |  点击下方按钮打开系统音频设置，       ||
|  |  将默认输出切换到虚拟音频设备。       ||
|  +--------------------------------------+|
|                                          |
+------------------------------------------+
|  [    打开系统音频设置    ]   [ 查看帮助 ]|
+------------------------------------------+
```

### 4.3 Step 3: 完成

```
+------------------------------------------+
| [==============100%==================]   |
+------------------------------------------+
|                                          |
|              +--------+                  |
|              |  [v]   |  (绿色)          |
|              +--------+                  |
|                                          |
|             一切就绪!                    |
|                                          |
|  Sleep Mode 已经准备好了。               |
|  点击托盘图标即可开启睡眠模式。          |
|                                          |
|  +--------------------------------------+|
|  | [时钟] 应用会常驻在系统托盘中        ||
|  +--------------------------------------+|
|  +--------------------------------------+|
|  | [键盘] 快捷键 [Ctrl/Cmd][Shift][S]   ||
|  +--------------------------------------+|
|                                          |
|              [ ]  [ ]  [*]               |
|                                          |
+------------------------------------------+
|  [            开始使用                ]  |
+------------------------------------------+
```

---

## 五、边缘状态

### 5.1 加载状态

```
+----------------------------------+
|  [月亮图标]  Sleep Mode          |
|             正在初始化...        |
+----------------------------------+
|                                  |
|           ( 旋转动画 )           |
|              ○○○○                |
|                                  |
|      正在初始化音频引擎          |
|    首次启动可能需要几秒钟        |
|                                  |
+----------------------------------+
```

### 5.2 音频设备错误

```
+----------------------------------+
|  [!]  Sleep Mode                 |
|       音频设备错误 (红色)        |
+----------------------------------+
|                                  |
|           +------+               |
|           | [X]  |  (红色)       |
|           +------+               |
|                                  |
|     无法访问音频设备             |
|                                  |
|  请检查音频输出设备是否正常连接，|
|  或尝试重启应用。                |
|                                  |
|  +----------------------------+  |
|  | E001: 设备未找到          |  |
|  +----------------------------+  |
|                                  |
|  [          重试          ]      |
|                                  |
+----------------------------------+
```

### 5.3 音频路由未就绪（E004/E005/E008）

```
+----------------------------------+
|  [!]  Sleep Mode                 |
|      需要设置音频路由 (橙色)     |
+----------------------------------+
|                                  |
|           +------+               |
|           | [盾] |  (橙色)       |
|           +------+               |
|                                  |
|  Sleep Mode 需要虚拟音频设备，   |
|  才能捕获系统输出并进行处理。     |
|                                  |
|  常见原因：                       |
|  - E004：未安装虚拟音频设备       |
|  - E008：系统默认输出未切换       |
|  - E005：macOS 未授予麦克风权限   |
|                                  |
|  [  打开系统音频设置  ]          |
|  [      查看帮助      ]          |
|                                  |
+----------------------------------+
```

### 5.4 无音频播放（空状态）

```
+----------------------------------+
|  [月亮图标]  Sleep Mode          |
|             已开启，待机中 (绿色)|
+----------------------------------+
|                                  |
|  [绿色图标] 睡眠模式      [=ON=] |
|            已开启，等待音频输入   |
|                                  |
+----------------------------------+
|                                  |
|           +------+               |
|           | [音] |  (灰色)       |
|           +------+               |
|                                  |
|       当前无音频播放             |
|    播放内容后将自动开始处理      |
|                                  |
+----------------------------------+
```

### 5.5 版本更新提示

```
+----------------------------------+
|  [月亮图标]  Sleep Mode          |
|             音频优化已开启       |
+----------------------------------+
|  +----------------------------+  |
|  | [i] v1.2.0 可用            |  |
|  |                            |  |
|  | 新增 macOS 支持、          |  |
|  | 自定义预设功能             |  |
|  |                            |  |
|  | [      立即更新      ]     |  |
|  +----------------------------+  |
+----------------------------------+
|                                  |
|  [绿色图标] 睡眠模式      [=ON=] |
|                                  |
+----------------------------------+
```

### 5.6 Pro 升级弹窗

```
+------------------------------------------+
|  升级到 Pro                        [X]   |
+------------------------------------------+
|                                          |
|              +--------+                  |
|              |  [星]  |  (渐变橙红)      |
|              +--------+                  |
|                                          |
|           解锁全部功能                   |
|                                          |
|  获取更多预设、自定义参数和              |
|  高级 EQ 控制                            |
|                                          |
|  +--------------------------------------+|
|  | [v] ASMR / 播客 / 白噪音预设         ||
|  | [v] 自定义压缩器参数                 ||
|  | [v] 完整睡眠 EQ 控制                 ||
|  | [v] 优先技术支持                     ||
|  +--------------------------------------+|
|                                          |
|  +----------------+  +----------------+  |
|  |     月付       |  |     买断       |  |
|  |    $4.99      |  |    $29.99     |  |
|  |     /月       |  |    一次性      |  |
|  +----------------+  +----------------+  |
|                        [省50%] (角标)    |
|                                          |
+------------------------------------------+
|  [          立即升级 (渐变橙红)      ]   |
+------------------------------------------+
```

---

## 六、Toast 通知

### 6.1 成功通知

```
+------------------------------------------+
| [v] 睡眠模式已开启                       |
|     正在优化系统音频                     |
+------------------------------------------+

位置: 屏幕右下角
显示时间: 3秒
动画: 从下方滑入
```

### 6.2 通知类型

| 类型 | 图标 | 颜色 | 场景 |
|------|------|------|------|
| 成功 | [v] | 绿色 | 开启成功、设置保存 |
| 信息 | [i] | 蓝色 | 状态变化提示 |
| 警告 | [!] | 橙色 | 需要注意 |
| 错误 | [x] | 红色 | 操作失败 |

---

## 七、交互规范

### 7.1 开关行为

```
状态转换:

OFF ----[点击]----> ON
 |                  |
 |                  v
 |            显示 Toast
 |            "睡眠模式已开启"
 |                  |
 |                  v
 |            开始音频处理
 |            状态指示变绿
 |
 +<---[点击]------- ON
                    |
                    v
              显示 Toast
              "睡眠模式已关闭"
                    |
                    v
              停止音频处理
              状态指示变灰
```

### 7.2 预设切换

```
当前预设: 睡眠模式
        |
        v
   [点击展开]
        |
        v
+------------------+
| 睡眠模式    [x]  |  <- 当前
| ASMR 模式       |
| 播客模式        |  <- [点击选择]
| 白噪音模式      |
+------------------+
        |
        v
  播客模式已激活
  参数立即生效
  显示 Toast
```

### 7.3 设置保存

```
用户修改参数
      |
      v
  实时预览效果
  (参数立即应用)
      |
      v
+-----+-----+
|     |     |
v     v     v
[确定] -> 保存到本地存储 -> 关闭面板
[恢复默认] -> 重置所有参数 -> 刷新 UI
[X 关闭] -> 丢弃未保存更改 -> 关闭面板
```

---

## 八、键盘快捷键

| 快捷键 | 功能 | 作用域 |
|--------|------|--------|
| `Ctrl+Shift+S` | 切换睡眠模式开关 | 全局 |
| `Escape` | 关闭当前弹窗/菜单 | 应用内 |
| `Enter` | 确认/提交 | 弹窗内 |

---

## 九、颜色规范

### 9.1 色板

```
主色 (Primary)
+----------+----------+----------+
| #4f46e5  | #6366f1  | #818cf8  |
|  深紫    |   主紫   |   浅紫   |
+----------+----------+----------+

背景色 (Background)
+----------+----------+----------+
| #0f0f1a  | #1a1a2e  | #252542  |
| 最深背景 |  卡片背景 | Hover态  |
+----------+----------+----------+

功能色 (Semantic)
+----------+----------+----------+----------+
| #22c55e  | #f59e0b  | #ef4444  | #3b82f6  |
|   成功   |   警告   |   错误   |   信息   |
+----------+----------+----------+----------+

文字色 (Text)
+----------+----------+----------+
| #f8fafc  | #94a3b8  | #64748b  |
|  主文字  |  次文字  |  禁用态  |
+----------+----------+----------+
```

### 9.2 应用场景

| 场景 | 颜色 |
|------|------|
| 开启状态 | 成功色 #22c55e |
| 关闭状态 | 禁用色 #64748b |
| 处理中 | 主色 #6366f1 |
| 需要操作 | 警告色 #f59e0b |
| 错误状态 | 错误色 #ef4444 |
| Pro 标识 | 渐变 #f59e0b -> #ef4444 |

---

## 十、组件尺寸速查

### 10.1 托盘菜单

| 元素 | 尺寸 |
|------|------|
| 菜单宽度 | 280px |
| 菜单圆角 | 12px |
| Header 高度 | 72px |
| 分割线 | 1px |
| 内边距 | 8-16px |

### 10.2 设置面板

| 元素 | 尺寸 |
|------|------|
| 面板宽度 | 380px |
| 最大高度 | 500px |
| Header 高度 | 60px |
| Footer 高度 | 60px |
| 按钮高度 | 44px |

### 10.3 引导流程

| 元素 | 尺寸 |
|------|------|
| 弹窗宽度 | 480px |
| 图标尺寸 | 80x80px |
| 进度条高度 | 4px |
| 按钮高度 | 44px |

### 10.4 通用组件

| 组件 | 尺寸 |
|------|------|
| 开关 | 44x24px |
| 复选框 | 20x20px |
| 滑块高度 | 6px |
| 滑块把手 | 18x18px |
| 小图标 | 16x16px |
| 中图标 | 20x20px |
| 大图标 | 40x40px |

---

## 十一、状态机

### 11.1 应用生命周期

```
[启动] --> [初始化中] --> [就绪]
              |              |
              v              v
          [初始化失败]    [开启] <--> [关闭]
              |              |
              v              v
          [显示错误]     [处理中]
                            |
                            v
                      [音频输出]
```

### 11.2 开关状态机

```
        +-------+
        | 关闭  |
        +---+---+
            |
      [用户点击开关]
            |
            v
        +-------+
        | 开启中 | (显示加载，最多2秒)
        +---+---+
            |
    +-------+-------+
    |               |
[成功]           [失败]
    |               |
    v               v
+-------+       +-------+
| 开启  |       | 错误  |
+-------+       +-------+
    |               |
[用户点击]      [用户重试]
    |               |
    v               |
+-------+           |
| 关闭  | <---------+
+-------+
```

---

## 十二、文案规范

### 12.1 状态文案

| 状态 | 标题 | 副标题 |
|------|------|--------|
| 关闭 | Sleep Mode | 音频优化已关闭 |
| 开启 | Sleep Mode | 音频优化已开启 |
| 处理中 | Sleep Mode | 正在优化系统音频 |
| 待机 | Sleep Mode | 已开启，待机中 |
| 错误 | Sleep Mode | 音频设备错误 |
| 需操作 | Sleep Mode | 需要设置音频路由 |

### 12.2 按钮文案

| 场景 | 主按钮 | 次按钮 |
|------|--------|--------|
| 设置面板 | 确定 | 恢复默认 |
| 引导流程 | 继续 | 跳过 |
| 音频路由设置(Windows) | 查看安装教程 | 稍后设置 |
| 音频路由设置(macOS) | 下载 BlackHole | 稍后设置 |
| 路由未就绪 | 打开系统音频设置 | 查看帮助 |
| 完成页 | 开始使用 | - |
| 错误状态 | 重试 | 查看帮助 |
| Pro 升级 | 立即升级 | - |

### 12.3 Toast 文案

| 场景 | 标题 | 描述 |
|------|------|------|
| 开启成功 | 睡眠模式已开启 | 正在优化系统音频 |
| 关闭成功 | 睡眠模式已关闭 | 音频处理已停止 |
| 设置保存 | 设置已保存 | 新设置已生效 |
| 预设切换 | 已切换到 {预设名} | 参数已更新 |
| 更新可用 | 新版本可用 | v{版本号} 已发布 |

---

## 十三、开发检查清单

### 13.1 托盘菜单

- [ ] 关闭状态 UI
- [ ] 开启状态 UI
- [ ] 预设下拉菜单
- [ ] EQ 开关
- [ ] 实时音量指示器
- [ ] 状态文字动态更新

### 13.2 设置面板

- [ ] 压缩强度滑块
- [ ] 输出响度滑块
- [ ] 高频柔化复选框
- [ ] 低频温暖复选框
- [ ] 开机自启动复选框
- [ ] 记住状态复选框
- [ ] 恢复默认按钮
- [ ] 确定按钮
- [ ] Pro 版高级参数（付费功能）

### 13.3 引导流程

- [ ] 欢迎页
- [ ] 音频路由设置（Windows：虚拟音频设备）
- [ ] 音频路由设置（macOS：BlackHole + 麦克风权限）
- [ ] 已安装但未路由（E008）
- [ ] 完成页
- [ ] 进度条动画
- [ ] 跳过功能

### 13.4 边缘状态

- [ ] 加载状态
- [ ] 音频设备错误
- [ ] 音频路由未就绪（E004/E005/E008）
- [ ] 无音频播放（空状态）
- [ ] 版本更新提示
- [ ] Pro 升级弹窗

### 13.5 交互

- [ ] 开关切换动画
- [ ] Toast 通知
- [ ] 全局快捷键
- [ ] 设置实时预览
